<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <title>Github Reading List</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.3/js/tether.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>
<style type="text/css">
  .entry-form{
    padding:40px;
    border:1px solid #ddd;
    border-radius:5px;
    background-color:#fcfdfd;
    margin:0 auto;
    margin-top: 40px;
  }

  .entry-form .form-success{
    padding:15px;
  }

  @media screen and (min-width: 740px){
    .entry-form{
      width:60%;
    }
  }

  .hidden{
    display:none;
  }
</style>
</head>

<body style="background-color:rgba(1,1,1,0) !important">
<script>
  //Create issue form handler
  window.addEventListener("load", function() {
    const bookmarkletForm = document.getElementById('bookmarklet-form');
    const bookmarkletButton = bookmarkletForm.querySelector('#button');
    bookmarkletButton.addEventListener("click", function(event) {
      const tok = bookmarkletForm.querySelector('#token').value;
      const repo = bookmarkletForm.querySelector('#repo').value;
      bookmarklet_url = "javascript:(function () {var jsCode = document.createElement('script');jsCode.setAttribute('src', 'https://gkiar.me/gitmarklet/bookmarklet.js');jsCode.setAttribute('token', 'TOKEN');jsCode.setAttribute('repo', 'REPO');jsCode.setAttribute('id', 'readerBookmarklet');document.body.appendChild(jsCode);}());"
      bookmarklet_url = bookmarklet_url.replace(/TOKEN/, tok)
      bookmarklet_url = bookmarklet_url.replace(/REPO/, repo)
      document.getElementById('bookmark-url').setAttribute('href', bookmarklet_url)
      document.getElementById('responseLink').classList.remove("hidden");
    })

  }, false)
</script>
<div class="row entry-form">
  <iframe src="./embedded.html" width="100%", height="795px" style="border:none; border-radius: 0px; margin: -10pt" ></iframe>
<div>
  <hr />
  <p><em>Psst! Want to do this for your own repo? Enter your repository name and API key, generate your link, and bookmark it to load this as an overlay, anywhere!</em></p>
  <form id="bookmarklet-form" autocomplete="off">
    <div class="form-group">
      <input type="text" class="form-control" id="repo" placeholder="Target Github repository" required>
    </div>
    <div class="form-group">
      <input type="text" class="form-control" id="token" placeholder="OAuth Github API token" required>
    </div>
    <button type="button" id="button" class="btn btn-info">Generate Link</button>
  </form>
  <p id="responseLink" class="hidden">Bookmark <a id="bookmark-url" href="">this link</a>!</p>
</div>
</div>
</body>
</html>
